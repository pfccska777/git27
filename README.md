#  Домашнее задание к занятию «Базы данных, их типы» - `Блинов Д.В.`

### Задание 1. СУБД

### Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

### Решение 1.

1.1 Бюджетирование проектов и финансовые отчёты
Лучше использовать реляционную СУБД (RDBMS), например, PostgreSQL, Oracle или MS SQL Server.

- Обеспечивает строгую структуру данных и целостность (ACID-транзакции).
- Удобна для сложных SQL-запросов, агрегаций, аналитики и построения отчетов.
- Возможна интеграция с BI-системами и инструментами прогнозирования.

1.2 Лендинги и CRM-система для лидов

- Для лендингов лучше использовать документоориентированную NoSQL базу, например MongoDB или Couchbase.
- Гибкая структура данных, легко масштабируемая под разные формы и динамические данные лидов.
- Быстрая обработка и запись данных.

- Для CRM — также подходит NoSQL (документоориентированная или графовая СУБД), например MongoDB или Neo4j.
- Гибкость схемы, поддержка быстрых операций с неструктурированными данными.
- Быстрая обработка большого потока лидов и взаимодействий.

1.3 База корпоративных норм и обучающего материала
Рекомендуется реляционная СУБД или документоориентированная NoSQL:

- Если данные структурированы и строго связаны — реляционная (PostgreSQL, MySQL).
- Если материалы представлены в виде документов, гипертекстов — MongoDB.
- Главное — простая и понятная структура, удобная для хранения и поиска документов.

1.4 Логистика и маршрутизация доставки
Идеально подойдут графовые СУБД (Neo4j, Amazon Neptune).

- Эффективная работа с объектами и их связями (маршруты, курьеры, пункты доставки).
- Быстрый поиск кратчайших путей, оптимизация маршрутов, сложные запросы с множественными связями.
- Поддержка сложных графовых алгоритмов для логистики.

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

### Решение 2.

Пошаговый процесс успешного пополнения баланса телефона

1. Инициация запроса пользователем
Пользователь вводит сумму пополнения и данные для оплаты (номер телефона, способ оплаты).

2. Проверка данных и авторизация
Система проверяет корректность введённых данных, наличие средств на счёте источника оплаты и авторизует транзакцию (например, через банк или платёжный шлюз).

3. Создание транзакции в СУБД
Формируется запись о трансакции со статусом «в обработке», фиксируется сумма, номер телефона, время и прочие данные.

4. Обновление баланса телефона
Если оплата подтверждена, баланс телефона в базе данных увеличивается на сумму пополнения.

5. Подтверждение успешного завершения
Статус транзакции обновляется на «завершена», пользователю отправляется уведомление об успешном пополнении.

6. Логирование и аудит
Все действия логируются для последующего аудита и разрешения споров, создаётся запись об операции в журналах.

Такой процесс гарантирует корректность, безопасность и атомарность операции (принцип ACID — либо все шаги выполнены, либо нет изменений).

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

### Решение 3

Пять преимуществ SQL-систем по отношению к NoSQL

1. Строгая структурированность данных
SQL-системы используют фиксированную схему с таблицами и связями, что обеспечивает целостность данных и удобство для сложных запросов.

2. Поддержка стандартного языка запросов (SQL)
Единый и мощный язык SQL позволяет легко формулировать сложные запросы, объединять таблицы (JOIN), выполнять агрегирование и фильтрацию.

3. Гарантии транзакционной целостности (ACID)
SQL-базы обеспечивают атомарность, консистентность, изоляцию и долговечность операций, что критично для финансовых и других важный приложений.

4. Широкая поддержка и зрелость технологий
Множество проверенных временем систем (MySQL, PostgreSQL, Oracle) с развитым сообществом, инструментами и документацией.

5. Удобство работы с отношениями и связями между данными
Возможность легко реализовывать сложные связи между таблицами, обеспечивать каскадные обновления, ограничения целостности и внешние ключи.

Эти преимущества делают SQL-системы более подходящими для приложений, где важна строгая структура, точность и сложные взаимосвязи данных.

### Задание 4.  Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

### Решение 4

Критерий выбора типа СУБД

- Основной критерий — горизонтальное масштабирование и поддержка распределённых вычислений на большом количестве узлов (1000 машин).
- Важна высокая производительность при обработке больших объёмов неструктурированных или слабо структурированных данных.
- Необходима высокая устойчивость к сбоям, автоматическое распределение данных и вычислений.
- Подходит СУБД, оптимизированная для NoSQL или NewSQL (если требуются транзакции), так как классические SQL-системы плохо масштабируются на тысячи узлов.

Лучшая модель распределённых вычислений

- Модель MapReduce / Распределённая обработка потоков данных (например, на базе Hadoop или Spark):
- Подходит для расчётов с большими объёмами данных, так как хорошо масштабируется на сотни и тысячи узлов.
- Позволяет распараллеливать вычисления, разбивая обработку на этапы "Map" (разбиение задачи) и "Reduce" (агрегация результатов).
- Обеспечивает отказоустойчивость и эффективное распределение нагрузки.
- Используется во многих современных системах для аналитики Big Data.
